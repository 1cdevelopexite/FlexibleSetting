<ValueTree xmlns="http://v8.1c.ru/8.1/data/core" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ValueTree">
	<column>
		<Name xsi:type="xs:string">Использовать</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Кнопка</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">КолонкаИсточника</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Источник</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Приемник</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">СлужебныеТекст</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Формула</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Служебные</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">КоллекцияТЧ</Name>
		<ValueType/>
	</column>
	<row>
		<row>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:nil="true"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">Дата</Value>
			<Value xsi:type="xs:string">Дата</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">ЭКОМ_ЗаказыЗагружатьТекущейДатой = Настройка_Параметр_Прочитать("ЭКОМ_ЗаказыЗагружатьТекущейДатой");
Если ЭКОМ_ЗаказыЗагружатьТекущейДатой Тогда
     Если ЗначениеЗаполнено(Источник.ДатаПоставки) Тогда
	      Возврат Источник.ДатаПоставки;
	 Иначе
		  Сообщить("Не указана дата поставки в заказе! документ = " + Строка(Источник));
	 	  Возврат Неопределено;	 
	 КонецЕсли;
Иначе	
     Возврат ТекущаяДата();
КонецЕсли;</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
		</row>
		<row>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:nil="true"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">Валюта (CURRENCY)</Value>
			<Value xsi:type="xs:string">Валюта документа</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">Если ЗначениеЗаполнено(Приемник.ДоговорКонтрагента) Тогда
	Возврат Приемник.ДоговорКонтрагента.ВалютаВзаиморасчетов;
Иначе
	Возврат Константы.ВалютаРегламентированногоУчета.Получить();
КонецЕсли;</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
		</row>
		<row>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:nil="true"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string"/>
			<Value xsi:type="xs:string"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">ЗаполнениеДокументов.ЗаполнитьШапкуДокумента(Приемник, глЗначениеПеременной("глТекущийПользователь"), Константы.ВалютаРегламентированногоУчета.Получить(), "Продажа");</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
		</row>
		<row>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:nil="true"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string"/>
			<Value xsi:type="xs:string">Курс взаиморасчетов</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">лСтруктура_Курса = МодульВалютногоУчета.ПолучитьКурсВалюты(Приемник.ВалютаДокумента, Приемник.Дата);
Возврат лСтруктура_Курса.Курс;</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
		</row>
		<row>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:nil="true"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string"/>
			<Value xsi:type="xs:string">Кратность взаиморасчетов</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">лСтруктура_Курса = МодульВалютногоУчета.ПолучитьКурсВалюты(Приемник.ВалютаДокумента, Приемник.Дата);
Возврат лСтруктура_Курса.Кратность;</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
		</row>
		<row>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:nil="true"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string"/>
			<Value xsi:type="xs:string">Учитывать НДС</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">Возврат Истина;</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
		</row>
		<row>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:nil="true"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string"/>
			<Value xsi:type="xs:string">Подразделение</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">Возврат УправлениеПользователями.ПолучитьЗначениеПоУмолчанию( глЗначениеПеременной("глТекущийПользователь"), "ОсновноеПодразделение");</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
		</row>
		<row>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:nil="true"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string"/>
			<Value xsi:type="xs:string">Склад группа</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">Возврат УправлениеПользователями.ПолучитьЗначениеПоУмолчанию(глЗначениеПеременной("глТекущийПользователь"), "ОсновнойСклад");</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
		</row>
		<row>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:nil="true"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string"/>
			<Value xsi:type="xs:string">Адрес доставки</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">АдресДоставки    = "";¶¶Запрос = Новый Запрос;¶Запрос.Текст = "ВЫБРАТЬ ПЕРВЫЕ 1¶   |	КонтактнаяИнформация.Представление КАК Адрес¶   |ИЗ¶   |	РегистрСведений.КонтактнаяИнформация КАК КонтактнаяИнформация¶   |ГДЕ¶   |	КонтактнаяИнформация.Объект = &amp;ТочкаДоставки¶   |	И КонтактнаяИнформация.Тип = ЗНАЧЕНИЕ(Перечисление.ТипыКонтактнойИнформации.Адрес)¶   |	И КонтактнаяИнформация.Вид = ЗНАЧЕНИЕ(Справочник.ВидыКонтактнойИнформации.ФактАдресКонтрагента)¶   |¶   |ОБЪЕДИНИТЬ ВСЕ¶   |¶   |ВЫБРАТЬ ПЕРВЫЕ 1¶   |	ЭКОМ_ТочкиДоставки.Адрес¶   |ИЗ¶   |	РегистрСведений.ЭКОМ_ТочкиДоставки КАК ЭКОМ_ТочкиДоставки¶   |ГДЕ¶   |	ЭКОМ_ТочкиДоставки.Объект = &amp;ТочкаДоставки";¶¶Запрос.УстановитьПараметр("ТочкаДоставки", Источник.ТочкаДоставки);¶Выборка = Запрос.Выполнить().Выбрать();	¶Если Выборка.Следующий() Тогда¶	АдресДоставки = Выборка.Адрес;¶КонецЕсли;¶¶Возврат АдресДоставки;</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
		</row>
		<row>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:nil="true"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">Дата Поставки (DELIVERYDATE)</Value>
			<Value xsi:type="xs:string">Дата отгрузки</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
		</row>
		<row>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:nil="true"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">Заказ дата (ORDERDATE)</Value>
			<Value xsi:type="xs:string">Дата входящего документа электронного обмена</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
		</row>
		<row>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:nil="true"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">Заказ номер (ORDERNUMBER)</Value>
			<Value xsi:type="xs:string">Номер входящего документа электронного обмена</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
		</row>
		<row>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:nil="true"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">Комментарий</Value>
			<Value xsi:type="xs:string">Комментарий</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">Возврат "Заказ № " + Источник.ЗаказНомер + " от " + Формат(Источник.ЗаказДата,"ДФ=dd.MM.yyyy" ) + "!!! Загружен из Exite-EDI";</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
		</row>
		<row>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:nil="true"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">Контрагент</Value>
			<Value xsi:type="xs:string">Контрагент</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
		</row>
		<row>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:nil="true"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">Номер договора на поставку (CAMPAIGNNUMBER)</Value>
			<Value xsi:type="xs:string">Договор контрагента</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">ДоговорСсылка = Справочники.ДоговорыКонтрагентов.ПустаяСсылка();

Если ЗначениеЗаполнено(Приемник.Контрагент.ОсновнойДоговорКонтрагента) Тогда
	ДоговорСсылка = Приемник.Контрагент.ОсновнойДоговорКонтрагента;
Иначе	
	Выборка = Справочники.ДоговорыКонтрагентов.Выбрать(,Приемник.Контрагент,,);
	Пока Выборка.Следующий() Цикл
		Если Выборка.ВидДоговора &lt;&gt; Перечисления.ВидыДоговоровКонтрагентов.Прочее Тогда
			ДоговорСсылка = Выборка.Ссылка;
			Прервать;
		КонецЕсли;
	КонецЦикла;
КонецЕсли;	

Возврат ДоговорСсылка;</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
		</row>
		<row>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:nil="true"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string"/>
			<Value xsi:type="xs:string">Тип цен</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">Если ЗначениеЗаполнено(Приемник.ДоговорКонтрагента.ТипЦен) Тогда
	Возврат Приемник.ДоговорКонтрагента.ТипЦен;
Иначе
	Возврат УправлениеПользователями.ПолучитьЗначениеПоУмолчанию(глЗначениеПеременной("глТекущийПользователь"), "ОсновнойТипЦенПродажи");
КонецЕсли;</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
		</row>
		<row>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:nil="true"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">Организация</Value>
			<Value xsi:type="xs:string">Организация</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
		</row>
		<row>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:nil="true"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string"/>
			<Value xsi:type="xs:string">Банк/касса</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">Возврат Приемник.Организация.ОсновнойБанковскийСчет;</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
		</row>
		<row>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:nil="true"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">Ответственный</Value>
			<Value xsi:type="xs:string">Ответственный</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">Возврат ПараметрыСеанса.ТекущийПользователь;</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
		</row>
		<row>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:nil="true"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">ПометкаУдаления</Value>
			<Value xsi:type="xs:string">ПометкаУдаления</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
		</row>
		<row>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:nil="true"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">Сумма документа всего</Value>
			<Value xsi:type="xs:string">Сумма документа</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
		</row>
		<row>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:nil="true"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">Точка доставки (DELIVERYPLACE)</Value>
			<Value xsi:type="xs:string">Грузополучатель</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
		</row>
		<row>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:nil="true"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string"/>
			<Value xsi:type="xs:string">Сумма включает НДС</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">СуммаВключаетНДС = Истина;
Попытка
	СуммаВключаетНДС = Приемник.Контрагент.ОсновнойДоговорКонтрагента.ТипЦен.ЦенаВключаетНДС;		
Исключение КонецПопытки;
Возврат СуммаВключаетНДС;</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
		</row>
		<row>
			<row>
				<Value xsi:type="xs:boolean">true</Value>
				<Value xsi:nil="true"/>
				<Value xsi:nil="true"/>
				<Value xsi:type="xs:string">Номенклатура</Value>
				<Value xsi:type="xs:string">Номенклатура</Value>
				<Value xsi:nil="true"/>
				<Value xsi:type="xs:string"/>
				<Value xsi:nil="true"/>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
			</row>
			<row>
				<Value xsi:type="xs:boolean">true</Value>
				<Value xsi:nil="true"/>
				<Value xsi:nil="true"/>
				<Value xsi:type="xs:string">Единица измерения</Value>
				<Value xsi:type="xs:string">Единица измерения</Value>
				<Value xsi:nil="true"/>
				<Value xsi:type="xs:string">Возврат Строка.Номенклатура.ЕдиницаХраненияОстатков;</Value>
				<Value xsi:nil="true"/>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
			</row>
			<row>
				<Value xsi:type="xs:boolean">true</Value>
				<Value xsi:nil="true"/>
				<Value xsi:nil="true"/>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="xs:string">Коэффициент</Value>
				<Value xsi:nil="true"/>
				<Value xsi:type="xs:string">Возврат 1;</Value>
				<Value xsi:nil="true"/>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
			</row>
			<row>
				<Value xsi:type="xs:boolean">true</Value>
				<Value xsi:nil="true"/>
				<Value xsi:nil="true"/>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="xs:string">Цена</Value>
				<Value xsi:nil="true"/>
				<Value xsi:type="xs:string">Возврат ?(Приемник.СуммаВключаетНДС, Строка.ЦенаСНДС, Строка.Цена);</Value>
				<Value xsi:nil="true"/>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
			</row>
			<row>
				<Value xsi:type="xs:boolean">true</Value>
				<Value xsi:nil="true"/>
				<Value xsi:nil="true"/>
				<Value xsi:type="xs:string"/>
				<Value xsi:type="xs:string">Сумма</Value>
				<Value xsi:nil="true"/>
				<Value xsi:type="xs:string">Возврат ?(Приемник.СуммаВключаетНДС, Строка.Сумма_с_НДС, Строка.Сумма);</Value>
				<Value xsi:nil="true"/>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
			</row>
			<row>
				<Value xsi:type="xs:boolean">true</Value>
				<Value xsi:nil="true"/>
				<Value xsi:nil="true"/>
				<Value xsi:type="xs:string">Количество заказанное (ORDEREDQUANTITY)</Value>
				<Value xsi:type="xs:string">Количество</Value>
				<Value xsi:nil="true"/>
				<Value xsi:type="xs:string"/>
				<Value xsi:nil="true"/>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
			</row>
			<row>
				<Value xsi:type="xs:boolean">true</Value>
				<Value xsi:nil="true"/>
				<Value xsi:nil="true"/>
				<Value xsi:type="xs:string">Ставка НДС (VAT)</Value>
				<Value xsi:type="xs:string">Ставка НДС</Value>
				<Value xsi:nil="true"/>
				<Value xsi:type="xs:string">Возврат СтавкаНДССсылка(Строка.СтавкаНДС);</Value>
				<Value xsi:nil="true"/>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
			</row>
			<row>
				<Value xsi:type="xs:boolean">true</Value>
				<Value xsi:nil="true"/>
				<Value xsi:nil="true"/>
				<Value xsi:type="xs:string">Сумма НДС</Value>
				<Value xsi:type="xs:string">Сумма НДС</Value>
				<Value xsi:nil="true"/>
				<Value xsi:type="xs:string"/>
				<Value xsi:nil="true"/>
				<Value xsi:type="ValueListType">
					<valueType/>
					<lastId xsi:type="xs:decimal">-1</lastId>
				</Value>
			</row>
			<Value xsi:type="xs:boolean">true</Value>
			<Value xsi:nil="true"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string">ТЧ товары</Value>
			<Value xsi:type="xs:string">Товары</Value>
			<Value xsi:nil="true"/>
			<Value xsi:type="xs:string"/>
			<Value xsi:nil="true"/>
			<Value xsi:type="ValueListType">
				<valueType/>
				<lastId xsi:type="xs:decimal">-1</lastId>
			</Value>
		</row>
		<Value xsi:type="xs:boolean">true</Value>
		<Value xsi:type="xs:string">Создать заказ</Value>
		<Value xsi:type="xs:string">ЭКОМ_Документ_ORDER</Value>
		<Value xsi:type="xs:string">ЭКОМ Документы</Value>
		<Value xsi:type="xs:string">Заказ покупателя</Value>
		<Value xsi:nil="true"/>
		<Value xsi:type="xs:string"/>
		<Value xsi:type="xs:string">ЭКОМ_СоздаватьДокументЗаказ1СПроведенным = Настройка_Параметр_Прочитать("ЭКОМ_СоздаватьДокументЗаказ1СПроведенным");

Если Приемник.Товары.Количество() = 0 Тогда
	ТекстСообщения = "Документ ""Поступление товаров"" по ЭКОМ документу № " + Источник.Номер +
	" не создан, т.к. не заполнены товары, возможно документ был сформирован вручную, проверьте поступление к этому заказу.";
	//Сообщить(ТекстСообщения, СтатусСообщения.Важное);
	ЗаписатьЛогСобытий(ЛогСобытий, ТекстСообщения);
Иначе
	Попытка
		Приемник.Записать(?(ЭКОМ_СоздаватьДокументЗаказ1СПроведенным, РежимЗаписиДокумента.Проведение, РежимЗаписиДокумента.Запись));
		ЭлектронныйДок = Источник.ПолучитьОбъект();
		ЭлектронныйДок.Документ1С = Приемник.Ссылка;
		ЭлектронныйДок.Записать();
		//Сообщить("Заказ по ЭКОМ документу №" + Источник.Номер + " создан! Заказ №" + Приемник.Номер + " от " + Приемник.Дата);
		ЗаписатьЛогСобытий(ЛогСобытий, "Заказ по ЭКОМ документу №" + Источник.Номер + " создан! Заказ №" + Приемник.Номер + " от " + Приемник.Дата);
	Исключение
		//Сообщить("Заказ по ЭКОМ документу №" + Источник.Номер + " не создан!!! " + СокрЛП(ОписаниеОшибки()));
		ЗаписатьЛогСобытий(ЛогСобытий, "Заказ по ЭКОМ документу №" + Источник.Номер + " не создан!!! " + СокрЛП(ОписаниеОшибки()));
	КонецПопытки;
	
КонецЕсли;

/////////////////////////////////////////////////////////////////////////////////////////
// Регистрация в цепочке документов
НаборЗаписей = РегистрыСведений.ЭКОМ_ЦепочкиДокументовПоставщика.СоздатьНаборЗаписей();
НаборЗаписей.Отбор.ORDER.Установить(Источник);

НаборЗаписей.Прочитать();

// Если существует запись в регистре
Для Каждого НоваяЗапись Из НаборЗаписей Цикл
	
	НоваяЗапись.Организация   = Источник.Организация;
	НоваяЗапись.Контрагент    = Источник.Контрагент;
	НоваяЗапись.ТочкаДоставки = Источник.ТочкаДоставки;
	
	НоваяЗапись.Заказ           = Приемник.Ссылка;
	НоваяЗапись.КоличествоЗаказ = Приемник.Товары.Итог("Количество");
	НоваяЗапись.СуммаЗаказ      = Приемник.Товары.Итог("Сумма");
	
	НаборЗаписей.Записать();
КонецЦикла;	

// Запись не найдена в цепочке
Если НаборЗаписей.Количество() = 0 Тогда
	// Сообщать только для тестирования 
	//Сообщить("Не найден документ ЭКОМ(ORDER) или не все измерения заполнены для регистра сведений ""ЭКОМ_ЦепочкиДокументовПоставщика""", СтатусСообщения.ОченьВажное);			
КонецЕсли;
///////////////////////////////////////////////////////////////////////////////////////////////////</Value>
		<Value xsi:type="ValueListType">
			<valueType/>
			<lastId xsi:type="xs:decimal">7</lastId>
			<item>
				<value xsi:type="xs:string">ИмяКнопки</value>
				<presentation>Создать заказ</presentation>
				<checkState>1</checkState>
				<id xsi:type="xs:decimal">4</id>
			</item>
			<item>
				<value xsi:type="xs:string">Покупатель</value>
				<id xsi:type="xs:decimal">5</id>
			</item>
			<item>
				<value xsi:type="xs:string">Поставщик</value>
				<checkState>1</checkState>
				<id xsi:type="xs:decimal">6</id>
			</item>
			<item>
				<value xsi:type="xs:string">ЭТРН</value>
				<id xsi:type="xs:decimal">7</id>
			</item>
		</Value>
	</row>
</ValueTree>