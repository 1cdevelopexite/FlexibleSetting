<ValueTree xmlns="http://v8.1c.ru/8.1/data/core" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ValueTree">
	<column>
		<Name xsi:type="xs:string">Использовать</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Кнопка</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Источник</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Приемник</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Служебные</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Формула</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">СлужебныеТекст</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Сохранение</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Загрузка</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">КолонкаИсточника</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">КоллекцияТЧ</Name>
		<ValueType/>
	</column>
	<row>
		<Value xsi:type="xs:boolean">true</Value>
		<Value xsi:type="xs:string">Создать счет-фактуру полученный</Value>
		<Value xsi:type="xs:string">Приобретение товаров и услуг</Value>
		<Value xsi:type="xs:string">СчетФактураПолученный</Value>
		<Value xsi:type="xs:string">РеквизитыСФ = УчетНДСВызовСервера.РеквизитыДляНадписиОСчетеФактуреПолученном(Источник);
Если НЕ РеквизитыСФ = Неопределено 
     И ЗначениеЗаполнено(РеквизитыСФ.Ссылка) Тогда
	ТекстЛогаСобытий = "Уже существует счет-фактура по поступлению - " + Строка(Источник);
	ЗаписатьЛогСобытий(ЛогСобытий, ТекстЛогаСобытий);
Иначе
	ГСЧ = Новый ГенераторСлучайныхЧисел;
    СлучЧисло = ГСЧ.СлучайноеЧисло(100, 999);

	Приемник.Заполнить(Источник.Ссылка);
	Приемник.Дата = ТекущаяДата();
	Приемник.КодСпособаПолучения = 1;
	Приемник.НомерВходящегоДокумента  = ?(ЗначениеЗаполнено(Источник.НомерВходящегоДокумента), Источник.НомерВходящегоДокумента, СлучЧисло);
	Приемник.ДатаВходящегоДокумента   = ?(ЗначениеЗаполнено(Источник.ДатаВходящегоДокумента), Источник.ДатаВходящегоДокумента, ТекущаяДата());	
	
	ИмяДокументаПрименика = "Счет-фактура полученный 1С";
	СоздаватьДокумент1СПроведенным = Настройка_Параметр_Прочитать("ЭКОМ_СоздаватьДокументПолученныйСЧФ1СПроведенным", Ложь);
	
	ДокументЗаписан = Ложь;
	Попытка
		Приемник.Записать(?(СоздаватьДокумент1СПроведенным, РежимЗаписиДокумента.Проведение, РежимЗаписиДокумента.Запись));      
		ДокументЗаписан = Истина;
	Исключение
		Приемник.Записать(РежимЗаписиДокумента.Запись);
		ТекстЛогаСобытий = ИмяДокументаПрименика + " по документу " + Строка(Источник.Ссылка) + " не создано!!! " + СокрЛП(ОписаниеОшибки()); 
		ЗаписатьЛогСобытий(ЛогСобытий, ТекстЛогаСобытий);
		ДокументЗаписан = Истина;
	КонецПопытки;
КонецЕсли;
</Value>
		<Value xsi:type="xs:string"/>
		<Value xsi:type="xs:string"/>
		<Value xsi:type="xs:decimal">0</Value>
		<Value xsi:type="xs:decimal">0</Value>
		<Value xsi:type="xs:string">ДокументПоступления</Value>
		<Value xsi:type="ValueListType">
			<valueType/>
			<lastId xsi:type="xs:decimal">-1</lastId>
		</Value>
	</row>
</ValueTree>