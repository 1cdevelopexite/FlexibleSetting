<ValueTree xmlns="http://v8.1c.ru/8.1/data/core" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ValueTree">
	<column>
		<Name xsi:type="xs:string">Использовать</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">ТипТранзакции</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Служебные</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">СлужебныеТекст</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Сохранение</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Загрузка</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">Кнопка</Name>
		<ValueType/>
	</column>
	<column>
		<Name xsi:type="xs:string">КоллекцияТЧ</Name>
		<ValueType/>
	</column>
	<row>
		<Value xsi:type="xs:boolean">true</Value>
		<Value xsi:type="xs:string">Входящий ORDRSP</Value>
		<Value xsi:type="xs:string">// Для получения ссылки документа
Приемник.Записать(); 

// Ищем валюту документа   
Если Приемник.xmlВалюта = "UAH" Тогда
    Валюта = Справочники.Валюты.НайтиПоКоду(980);
ИначеЕсли Приемник.xmlВалюта = "RUB" Тогда
    Валюта = Справочники.Валюты.НайтиПоКоду(643);
ИначеЕсли Приемник.xmlВалюта = "USD" Тогда
    Валюта = Справочники.Валюты.НайтиПоКоду(840);
ИначеЕсли Приемник.xmlВалюта = "EUR" Тогда
    Валюта = Справочники.Валюты.НайтиПоКоду(978);
ИначеЕсли Приемник.xmlВалюта = "MDL" Тогда
    Валюта = Справочники.Валюты.НайтиПоКоду(498);
ИначеЕсли Приемник.xmlВалюта = "BYR" Тогда
    Валюта = Справочники.Валюты.НайтиПоКоду(974);
ИначеЕсли Приемник.xmlВалюта = "KZT" Тогда
    Валюта = Справочники.Валюты.НайтиПоКоду(398);
Иначе
    Валюта = Справочники.Валюты.НайтиПоКоду(643);
КонецЕсли;
Приемник.Валюта = Валюта;

// Заполняет табличную часть
Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ
|    ЭКОМ_ДокументыТЧ_Товары.НомерПродукта КАК НомерПродукта,
|    ШтрихкодыНоменклатуры.Номенклатура КАК Номенклатура,
|    ШтрихкодыНоменклатуры.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмерения
|ИЗ
|    Документ.ЭКОМ_Документы КАК ЭКОМ_Документы
|        ЛЕВОЕ СОЕДИНЕНИЕ Документ.ЭКОМ_Документы.ТЧ_Товары КАК ЭКОМ_ДокументыТЧ_Товары
|            ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ШтрихкодыНоменклатуры КАК ШтрихкодыНоменклатуры
|            ПО ЭКОМ_ДокументыТЧ_Товары.НомерПродукта = ШтрихкодыНоменклатуры.Штрихкод
|        ПО ЭКОМ_Документы.Ссылка = ЭКОМ_ДокументыТЧ_Товары.Ссылка
|ГДЕ
|    ЭКОМ_Документы.Ссылка = &amp;Документ";
Запрос.УстановитьПараметр("Документ", Приемник.Ссылка);

Результат = Запрос.Выполнить();
ТЗ = Результат.Выгрузить();
ТЗ.Индексы.Добавить("НомерПродукта");
Для Каждого Стр Из Приемник.ТЧ_Товары Цикл
    НайденнаяСтрока = ТЗ.Найти(Стр.НомерПродукта, "НомерПродукта");    
    Если НЕ НайденнаяСтрока = Неопределено Тогда  
        Стр.Номенклатура     = НайденнаяСтрока.Номенклатура;
        Стр.ЕдиницаИзмерения = НайденнаяСтрока.ЕдиницаИзмерения;
    КонецЕсли;          
КонецЦикла;

// Меняем статус
Если ЗначениеЗаполнено(Приемник.Документ1С) Тогда
    ДокументЗаказа = Приемник.Документ1С.ПолучитьОбъект();
    ДокументЗаказа.Статус = Перечисления.СтатусыЗаказовПоставщикам.Подтвержден;
    Если ЗначениеЗаполнено(Приемник.ДатаПоставки) Тогда
        ДатаПоступления = Приемник.ДатаПоставки;
    Иначе
        ДатаПоступления = ТекущаяДата();
    КонецЕсли;

    Если ДокументЗаказа.ПоступлениеОднойДатой Тогда
        Если НЕ ЗначениеЗаполнено(ДокументЗаказа.ДатаПоступления) Тогда
            ДокументЗаказа.ДатаПоступления = ДатаПоступления;
        КонецЕсли;                 
    КонецЕсли;
    Для каждого Стр Из ДокументЗаказа.Товары Цикл
        Если НЕ ЗначениеЗаполнено(Стр.ДатаПоступления) Тогда
            Стр.ДатаПоступления = ДатаПоступления;
        КонецЕсли;            
    КонецЦикла;  

    ДокументЗаказа.Записать(РежимЗаписиДокумента.Проведение);
КонецЕсли;


// Проводим документ
Приемник.Записать(РежимЗаписиДокумента.Проведение);</Value>
		<Value xsi:type="xs:string"/>
		<Value xsi:type="xs:decimal">0</Value>
		<Value xsi:type="xs:decimal">0</Value>
		<Value xsi:type="xs:string">Подтверждения заказов (ORDRSP)</Value>
		<Value xsi:type="ValueListType">
			<valueType/>
			<lastId xsi:type="xs:decimal">-1</lastId>
		</Value>
	</row>
</ValueTree>